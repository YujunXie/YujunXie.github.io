---
title: 探索迷之正则表达式
key: 20170825
tags: 正则表达式
---

正则表达式非常重要，字符串的匹配，截取等操作运用在各式各样的数据操作上。
但是总是学了忘，忘了学，记录一遍，看能不能发现记忆的诀窍。

 1. 常用元字符
 2. 模式修正符
 3. 运算符优先级
 4. 选择，分组和后向引用
 5. 环视
 6. 常用正则表达式


<!--more-->

 1. 常用元字符

	不参与匹配，用于构造各种匹配复杂文本的正则表达式的基本字符。

	>

		( ),[ ],{ }
		( )括号，可用于：
		1）对字符进行分组，对字符组合使用限定符，如([0-9])+.
		2）表示可选性，如(A&#124;a).
		3）分组捕获，如(pattern)，非获取匹配(?:pattern)，正向预查(?=pattern)，负向预查(?!pattern).
		4）反向引用，如(\d)\d\1匹配707，\1对括号内分组捕获的内容进行了反向引用.
		[ ]中括号，可用于匹配任意一个字符，如[abc]中的a，[^ ]相反，任意一个字符都不匹配.
		{}大括号，用于表示重复匹配次数，如匹配两次{2}，至少匹配两次{2,}，至少匹配两次至多三次{2,3}.
	
	 	^,$
		匹配起始符^，匹配结束符$，如^[0-9][a-z]$为以数字开头，字母结尾的字符串.
	
		*,+,?,.
		*：重复零次或多次. {0，}
		+：重复一次或多次. {1，0}
		?：重复零次或一次. {0,1}
		.：匹配除换行符外的任意字符.

		其他
		\\：转义.
		&#124;：或.
		\b：匹配单词分界，如er\b匹配never而不能是era, \B匹配非单词边界.
		\d：匹配数字, \D：匹配非数字.
		\s：匹配空白字符，如换页符\f,换行符\n,制表符\t等，\S匹配非空白字符.
		\w：匹配数字，字母，汉字，下划线，\W相反.


 2. 模式修正符

	>
	    i：匹配不区分大小写，如"/aBc/i"
	    m：将字符串视为多行，可多行匹配
	    s：将字符串视为单行，换行符作为普通字符
	    x：忽略模式中的空白
	    A：强制从目标字符串开头匹配
	    D：如果使用$限制结尾字符,则不允许结尾有换行
	    U：只匹配最近的一个字符串，不重复匹配.
	    g：全局匹配，返回所有可能的匹配，不加只返回最多一个匹配结果

3. 运算符优先级

	>
    	转义符\\ -> (),[] -> *,+,?,{} -> ^,$,\b... -> &#124;

4. 选择，分组和后向引用

	1）子模式
	
	即分组中的一个或多个分组，如(the&#124;The&#124;THE),[Tt]等。
	
	2）捕获分组和后向引用
	
	对内容进行捕获并临时存储与内存中，通过后向引用重用捕获到的内容。如\1或$1
	
	命名分组：通过名字来引用分组，如命名分组(?<name>...),引用(?name...)
	
	3）非捕获分组
	
	不存储捕获到的内容，因而再不需要后向引用时能获得较高的性能。如(?i:the)
	
	4）原子分组
	
	关闭正则表达式中的回溯操作（会尝试每一种可能性，因此浪费资源和时间），避免造成灾难性回溯。
	
	回溯操作：就相当于一棵树，往下匹配不成功时，就得往上回溯，选择另一分支继续往下匹配，重复直至找到匹配成功的。

5. 环视

	环视是一种非捕获分组，它根据某个模式之前或之后的内容捕获其他模式。

----------


如果说正则表达式是简化文本匹配工作的一种字符串表达方式，不如说它是一种思维方式。用简单的字符串组合匹配所需的大量信息。

正则表达式解释器主要由三部分组成：解释，编译和执行。这里涉及了编译原理等底层运行原理，感兴趣的同学可以去看一看编译原理这本书，了解下我们所有的计算机语言到了机器层面是怎样工作起来的。
