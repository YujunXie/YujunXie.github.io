---
title: Windows下php+sqlserver环境配置
key: 20161220
tags: PHP
---

CodeIgniter是一套给PHP网站开发者使用的应用程序开发框架和工具包。

在环境为win10+PHP+Sqlserver下需要快速开发一个民航订票管理系统时，在大致比较过几个主流框架后，我选择了这个小巧灵活，广泛兼容的PHP框架。

[CodeIgniter中国](http://codeigniter.org.cn/)

安装和配置都很简单，用户手册里都有详细的步骤说明。由于是快速开发，并没有深入熟悉CodeIgniter，所以只重点介绍用到的几个方面，如果可以，持续更新。


<!--more-->


 1. 数据库

	- 配置好`application/config/database.php`文件，由于我使用的是sqlserver数据库，**dbdriver**填的是`sqlsrv`，**mysql**则是`mysqli`。

 	- 连接数据库就像开车一样有两种方式，自动和手动，我选择了手动，一句`$this->load->database();`就开启了数据库连接。但是实际上我的所有页面都需要连接数据库，自动连接更加便捷。

 	- 转义查询，对于字符串字段的查询必须先转义也就是加上单引号才能正确匹配。CodeIgniter提供函数`$this->db->escape();`直接转义。

 	- 所有更删查的函数CodeIgniter都提供了，当然你也可以直接使用sql语句进行操作。

2. MVC模式
	
	当你下载好CodeIgniter后，整个目录文件的形式就是依照MVC模式设定的`Controller`,`Model`,`View`三者分立。当然它并没有强制你开发模式的使用。

 	- 一个控制器`Controller`就是一个类文件，是以一种能够和 URI 关联在一起的方式来命名的。当控制器的名称和 URI 的第一段匹配上时，它将会被加载。你所编写的所有控制器文件都继承于CodeIgniter的父类控制器`CI_Controller`，从而使用它为你已经写好的方法。URI 中的第二段用于决定调用控制器中的哪个方法。URI 多余的段将作为参数传递到你的方法中。因此你可以将你的主页设置为默认的控制器。

 	- 模型`Model`是专门用来和数据库打交道的 PHP 类，也就是说，对数据库的操作都是模型文件进行处理。当你在控制器中要进行对数据库的操作，那么就加载对应模型`$this->load->model('model_name');`加载之后，你就可以通过一个和你的类同名的对象访问模型中的方法。`$this->model_name->method();`方法返回值供控制器判断或处理。

	- 视图就是我们所能看到的Web页面。视图不是直接被调用的，它必须通过控制器来加载。`$this->load->view('name');`，也可以向视图传递控制器中的动态数据。在视图文件中可以直接调用控制器的某个方法从而进行数据的交互。

3. 类库和辅助函数

	CodeIgniter提供了丰富的类库和辅助函数供我们快速开发。如我所使用的表单验证类，session类，数组辅助函数，表单辅助函数等等。

----------

在使用CodeIgniter之前，使用过的一个MVC框架是ThinkPHP，这个框架更适合大型web应用的开发，结构比较复杂，直到现在才真正理解MVC模式。

比较深刻的领悟是，框架什么的本质上都只是一个工具，提供集成好的操作函数，规范你的代码等等，开发过程中最重要的还是自己拓展的思维和清晰的逻辑。

    不忘初心，路在脚下。
