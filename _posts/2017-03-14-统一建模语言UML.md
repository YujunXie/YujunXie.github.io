---
title: 统一建模语言UML
key: 20170314
tags: UML
---

在之前的软件体系结构课程和现在的软件工程课程中，统一建模语言UML都是用来描述软件过程的一种重要的表达方式。
正如它所被发明时，

> UML的目标之一就是为开发团队提供标准通用的设计语言来开发和构建计算机应用。
UML是一种定义良好、易于表达、功能强大且普遍适用的建模语言。它融入了软件工程领域的新思想、新方法和新技术。它的作用域不限于支持面向对象的分析与设计，还支持从需求分析开始的软件开发的全过程。


<!--more-->


上述这段话当初考试时时背过的。。。

最常用的UML图包括：用例图、类图、序列图、状态图、活动图、组件图和部署图。

以模型的方式划分：

 - 功能模型: 从用户的角度展示系统的功能，包括用例图。 
 - 对象模型: 采用对象，属性，操作，关联等概念展示系统的结构和基础，包括类图、对象图。 
 - 动态模型: 展现系统的内部行为。 包括序列图，活动图，状态图。

 1. ***用例图***

	- 关键词：**actor**(参与者)，**use case**(用例)，relationship(关系)

	- Actor: 进行交互的用户、组织或外部系统。（用一个小人表示）

	- Use Case: 外部可见的系统功能，对系统提供的服务进行描述。（椭圆形）

	![包含与扩展关系.jpg](https://i.loli.net/2018/08/16/5b75441766ed2.jpg)

	用例图的三种关系：

	- 包含(include):用来把一个较复杂用例所表示的功能分解成较小的步骤。箭头指向分解出来的功能用例。
	- 扩展(extend): 指用例功能的延伸，相当于为基础用例提供一个附加功能。箭头指向基础用例。

	（包含与扩展不同：include用例会无条件发生，而extend中的延伸用例的发生是有条件的。其实从字面意思就能明白，包含是肯定能发生的，而扩展是相对独立可选的动作。）

	- 泛化(generalization)：继承关系。子用例将继承父用例的所有结构、行为和关系。父用例通常是抽象的。箭头指向父用例。

	![泛化关系](https://i.loli.net/2018/08/16/5b75441763a54.png)

	> 泛化侧重表示子用例间的互斥性；
	包含侧重表示被包含用例对Actor提供服务的间接性；
	扩展侧重表示扩展用例的触发不定性；

	感觉用例图也就只能用来初步描述下系统功能了，每个用例都有很大的发散空间，不好把握包含和扩展的关系，所以用例图是较凌乱的，初步的描述系统功能的图。

 2. ***类图***

	关键词：**类名**，**属性**，**方法**

	主要是用来显示系统中的类、接口以及它们之间的静态结构和关系的一种静态模型。

	类图的六种关系：

 	- 泛化关系(generalization)+实现关系(realize)
	
	表示类的继承结构:"is-a"
	
	泛化：表现为继承非抽象类；(一条带空心箭头的实线)
	
	实现:表现为继承抽象类；(一条带空心箭头的虚线)

	 - 聚合(aggregation)+组合(composition)
	
	表示整体由部分构成的语义。
	
	聚合：整体和部分不是强依赖的，即使整体不存在了，部分仍然存在;(一条带空心菱形箭头直线,菱形指向整体)
	
	组合：是一种强依赖的特殊聚合关系，如果整体不存在了，则部分也不存在了；(一条带实心菱形箭头直线,菱形指向整体)

 	- 关联(association)+依赖(dependency)

	关联：描述不同类的对象之间的结构关系;由常识等因素决定的；在最终代码中，关联对象通常是以成员变量的形式实现的；(一条直线)
		
	默认不强调方向，表示对象间相互知道；如果特别强调方向，如下图，表示A知道B，但B不知道A；
	![关联关系](https://i.loli.net/2018/08/16/5b7544161efe9.jpg)

	依赖：描述一个对象在运行期间会用到另一个对象的关系；是一种临时性的关系，通常在运行期间产生，并且随着运行时的变化，依赖关系也可能发生变化；（带箭头的虚线）
	
	在最终代码中，依赖关系体现为类构造方法及类方法的传入参数，箭头的指向为调用关系；依赖关系处理临时知道对方外，还是“使用”对方的方法和属性；


	各种关系的强弱顺序：泛化 = 实现 > 组合 > 聚合 > 关联 > 依赖

	举个栗子

	![类图所有关系](https://i.loli.net/2018/08/16/5b754417c10bb.jpg)

	~~~
    车的类图结构为<<abstract>>，表示车是一个抽象类；
    它有两个继承类：小汽车和自行车；它们之间的关系为实现关系，使用带空心箭头的虚线表示；
    小汽车为与SUV之间也是继承关系，它们之间的关系为泛化关系，使用带空心箭头的实线表示；
    小汽车与发动机之间是组合关系，使用带实心箭头的实线表示；
    学生与班级之间是聚合关系，使用带空心箭头的实线表示；
    学生与身份证之间为关联关系，使用一根实线表示；
    学生上学需要用到自行车，与自行车是一种依赖关系，使用带箭头的虚线表示；
    ~~~

 3. ***序列图***（顺序图，时序图）

	关键词：对象（**Actor**），生命线（**Lifeline**）、控制焦点（**Focus of control**）、消息（**Message**）
	
	时序图描述了类以及类之间的随时间顺序交换以完成的期望行为的消息, 时序图中每条消息都代表了类的一个操作或者引起状态机改变的触发事件;

	![20140306163918421.png](https://i.loli.net/2018/08/16/5b75441621eb7.png)

	对象：使用矩形将对象名称包含起来, 并且对象名称下有下划线。
		
	- -- 处于顶部 : 如果对象的位置在时序图顶部, 说明在交互开始的时候对象就已经存在了;
	- -- 不在顶部 : 如果对象的位置不在顶部, 那么对象在交互过程中创建的。

	生命线：一条垂直的虚线, 这条虚线表示对象的存在。

	控制焦点(激活)：当对象处于激活时期, 生命线可以拓宽为矩形, 这个矩形条成为激活条; 矩形框的高度表示对象执行一个操作所经历的时间段，矩形的顶部表示动作的开始，底部表示动作的结束。

	消息：对象间的一种通信机制。
	
	- 同步消息：直接调用对象的方法, 执行方法返回结果。
	- 异步消息：消息是信号的时候, 发送信号之后, 等待对方触发相应方法。
	- 返回消息：表示从过程调用返回。

	自关联消息：表示方法的自身调用以及一个对象内的一个方法调用另外一个方法 。
	![自关联消息.png](https://i.loli.net/2018/08/16/5b754416207b4.png)

	无对象消息：
	
	- 无触发对象消息（Found Message）：用活动条开始断点上的实心球箭头来表示。（用在开始）
	- 无接收对象消息（lost message）：用箭头加实心球表示。（用在结束）

	时序图适合消息驱动的系统。

 4. ***活动图***

	关键词：活动，状态，转移，判断,同步条

	是一种流程图，用来描述活动的序列，着重表现从一个活动到另一个活动的控制流，是内部处理驱动的流程。
	![活动图](https://i.loli.net/2018/08/16/5b754417c3e99.png)

	活动：命令的执行，活动的进行。(椭圆形)
	
	状态：开始状态，结束状态。
	
	转移：活动之间，活动与状态之间的转换。
	
	判断：对一个动作或者状态进行判断，然后选择要执行的下一步操作。(空形菱形表示)
	
	同步条：用于并行执行的活动图中。成对出现，并行活动开始和结束都有一跟同步条来表示分歧和汇合。
	

	带泳道的活动图：对活动进行分组
	![image_thumb_6.png](https://i.loli.net/2018/08/16/5b754417c6569.png)

	带对象流的活动图：将活动涉及到得对象通过依赖将其连接在状态或者活动上。对象用矩形框表示。
	![1.png](https://i.loli.net/2018/08/16/5b7544169ac7e.png)

----------

以上介绍了用例图，类图，序列图和活动图四种常用的UML图。

我认为活动图是最接近我们人的思维的以流程的方式叙述系统功能，也能在建图过程中发现一些问题。
